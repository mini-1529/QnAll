<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="utf-8">
  <title>QnAll - 질문하기</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="uploadphoto"</script>
  <style>
    /* 스타일 내용은 동일 */
  </style>
</head>

<body>
  <div class="container">
    <h1 class="title">QnAll 질문하기</h1>
    <p class="description">여기에서 모르는 걸 질문해보아요~~~</p>
    <h3 class="section-title">과목명</h3>
    <select name="과목" class="select">
      <option value="1">수1</option>
      <option value="2">수2</option>
      <option value="3">확률과 통계</option>
      <option value="4">미적분</option>
      <option value="5">기하</option>
      <option value="6">수학(상)</option>
      <option value="7">수학(하)</option>
    </select>

    <h3 class="section-title">무엇을 모르겠는지 간단하게 적어주세요</h3>
    <h5 class="section-subtitle">(그냥 '어떻게 푸는지 모르겠어요' 정도도 괜찮습니다)</h5>
    <textarea id="박스1" class="text-area" type="text"></textarea>

    <h3 class="section-title">구체적으로 무엇이 궁금한가요?</h3>
    <textarea id="박스2" class="text-area" type="text"></textarea>

    <div>ㅤ</div>
    <div>ㅤ</div>
    <div>
      <input type="file" id="file-input" class="file-input" accept="image/*">
      <div></div>
      <button onclick="uploadPhoto()" class="upload-button">업로드</button>
    </div>
  </div>

  <script>
    function uploadPhoto() {
      const fileInput = document.getElementById('file-input');
      const file = fileInput.files[0];

      if (file) {
        const formData = new FormData();
        formData.append('photo', file);

        const url = 'https://qnall.kro.kr/'; // 실제 파일을 업로드하고 처리할 서버의 URL로 변경해야 합니다.

        // 업로드 중에는 업로드 버튼을 비활성화합니다.
        const uploadButton = document.querySelector('.upload-button');
        uploadButton.disabled = true;

        // 로딩 표시기를 표시합니다.
        const loadingIndicator = document.querySelector('.container');
        loadingIndicator.innerHTML += '<p class="loading-indicator">업로드 중...</p>';

        // AJAX 요청
        $.ajax({
          url: url,
          type: 'POST',
          data: formData,
          processData: false,
          contentType: false,
          success: function(response) {
            console.log('파일 업로드 성공:', response);
            // 업로드 성공 시 추가 작업을 수행합니다.

            // 업로드 버튼을 활성화하고 로딩 표시기를 제거합니다.
            uploadButton.disabled = false;
            loadingIndicator.querySelector('.loading-indicator').remove();
          },
          error: function(xhr, status, error) {
            console.error('파일 업로드 실패:', error);
            // 업로드 실패 시 처리할 내용입니다.

            // 업로드 버튼을 활성화하고 로딩 표시기를 제거합니다.
            uploadButton.disabled = false;
            loadingIndicator.querySelector('.loading-indicator').remove();
          }
        });
      } else {
        console.log('파일을 선택해주세요.');
      }
    }
  </script>
</body>

</html>
